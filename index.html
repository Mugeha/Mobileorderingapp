<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="author" content="Mugeha">
  <meta name="description" content="Monile Ordering App">
  <link rel="stylesheet" href="C:\Users\25475\OneDrive\Mobile Ordering App\index.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Agbalumo&family=Cabin:ital@1&family=Happy+Monkey&family=Inter:wght@100;400&family=Karla&family=Noto+Sans&family=Noto+Sans+JP&family=Nunito&family=PT+Sans&display=swap" rel="stylesheet">
  <style>
    body{
  margin:0;
  font-family: 'PT Sans', sans-serif;
}
*{
  box-sizing: border-box;
}
.content, .order1,#complete-order,.a{
  width:380px;
  margin:20px auto;
}
.content img{
  object-fit: cover;
  width:380px;
  height:150px;
  position:relative;
}
.rel{
  position:relative;
}

.abs{
  position:absolute;
  color:white;
  top:35px;
  left:7px;
  font-size:16px;
}
/* .container{
  display:flex;
  flex-direction: column;
  /* justify-content: space-between;
  border-bottom: 1px solid #8B8B8B;

}*/
.emoji{
  font-size:58px;
  margin-top: 0;
}
.be-together{
  display:flex;

}
#cont{
  border-bottom: 1px solid #8B8B8B;
  display:flex;
  margin:15px 15px;
   justify-content: space-between;
}
#plus-sign{
  border-radius:50%;
  padding:10px;
  float:right;
}
.cont img{
  width:70px;
  height:89px;
}
.p{
  color:#8B8B8B;
  font-size: 9px;
}
.order, .total{
  display:flex;
  justify-content: space-between;
}
.btn{
  opacity:0.7;
}
#complete-order, .pay-button{
cursor:pointer;
  padding:13px 26px;
  color:#FFF;
  background-color: rgb(45, 207, 75);
border-radius: 4px;
border:none;
}
.card-details{
  display:none;
}
input{
    margin-top: 10px;
    border: 1px solid #212529;
    padding: 10px;
    width: 100%;
    border-radius: 3px;
}
.card-details{
  display: none;
    position: fixed;
    right: 0;
    left: 0;
    top: 0;
    bottom: 0;
    margin: auto;
  border-radius: 5px;
    box-shadow: 0px 0px 6px 2px #666;
    height: 320px;
  width: 380px;
z-index:1000;
  background-color: #212529;
}
.card-inner{
    width: 290px;
    margin: 0 auto;
}
.pay-button{
  margin-top: 10px;
  width:100%;
}
.a{
  background-color:rgb(147, 176, 186);
  padding:10px 20px;
  text-align: center;
}
.rating-section{
  display:none;
}
.star {
      cursor: pointer;
      font-size: 25px;
      color: #ccc;
      transition: color 0.2s;
    }

    .star.selected {
      color: gold;
    }
  </style>
  </head>
  <body>
    <main>
    <div class="content">
      <div class="rel">
      <img src="C:\Users\25475\OneDrive\Mobile Ordering App\burgerking.jpeg" alt="Burger King">
      <div class="abs">
      <p>Jimmy's Diner</p>
      <p>The best pizza and burgers in town</p>
      </div>
      </div>
          <div id="container"></div>
        </div>
        <div id="orders"></div>
        <div class="card-details" id="card-details">
        <form class="card-inner" id="card-inner">
          <h4 style="text-align:center;color:whitesmoke;">Enter card details</h4>
          <input type="text" name="fullName" placeholder="Enter Your Name" aria-label="Full Name" required/>
          <input type="text" name="card-number" placeholder="Enter card number" aria-label="Card Number" required/>
          <input type="text" name="CVV" placeholder="Enter cvv" aria-label="CVV" required/>
          <button type="submit" class="pay-button" id="pay-button">PAY</button>
        </form>
      </div>
      <div id="rating-section" class="rating-section" style="text-align: center; margin-top: 20px;">
    <p>Please rate your experience:</p>
    <div id="star-rating">
      <span class="star" data-rating="1">&#9733;</span>
      <span class="star" data-rating="2">&#9733;</span>
      <span class="star" data-rating="3">&#9733;</span>
      <span class="star" data-rating="4">&#9733;</span>
      <span class="star" data-rating="5">&#9733;</span>
    </div>
  </div>
        </main>

        <script>
          const menuArray = [
    {
        name: "Pizza",
        ingredients: ["pepperoni", "mushrom", "mozarella"],
        id: 0,
        price: 14,
        emoji: "üçï"
    },
    {
        name: "Hamburger",
        ingredients: ["beef", "cheese", "lettuce"],
        price: 12,
        emoji: "üçî",
        id: 1
    },
        {
        name: "Beer",
        ingredients: ["grain, hops, yeast, water"],
        price: 12,
        emoji: "üç∫",
        id: 2
    }
]

console.log("Jaackie");
/* const mybtn = document.getElementById('mybtn')
const container = document.getElementById('container')
const orders = document.getElementById("orders")
const plusSign = document.getElementById('plus-sign');
*/

/* document.getElementById('click', function(e){
  if (e.target.dataset.choose){
    renderOrder(e.target.dataset.choose)
  }
})*/
/* container.addEventListener('click', function (e) {
  if (e.target.classList.contains('mybtn')) {
    const chosenItemId = e.target.dataset.choose;
    handleOrderClick(chosenItemId);
  }
});

const orders = []
/*function handleOrderClick(myId){
  const myTarget = menuArray.filter(function(menu){
    return menu.id === myId

    for(let item of myOrders){
      myOrders.push( `
      <div>
        <h4>Your Order</h4>
        <div class="order">
          <p>${menu.name}<button id="btn"><small>remove</small></button></p>
          <p>${menu.price}</p>
          </div>
          <div class="total">
            <p>Total price:</p>
            <p>${menu.price}</p>
            </div>
            <button id="complete-order">Complete Order></button>
            </div>
      `)
    }


  })[0]

}*/
/*function handleOrderClick(chosenItemId) {
  const chosenItem = menuArray.find(menu => menu.id === parseInt(chosenItemId));
  myOrders.push(chosenItem);

  renderOrder();
}*/
/*
function renderOrder(){
  document.getElementById('orders').innerHTML = handleOrderClick(menuArray)

}
renderOrder()

*/
let ordersArray = []
let orderCompleted = false;
function render(){
  const container = document.getElementById('container');
container.innerHTML = getMenuHtml(menuArray);

if(orderCompleted){
  container.classList.add('order-completed')
}
}


function getMenuHtml(menuObj){
  return menuObj.map(menu =>  `
    <div id="cont">
      <div class="be-together">
      <p class="emoji">${menu.emoji}</p>
      <div>
        <h4>${menu.name}</h4>
        <p class="p">${menu.ingredients}</p>
        <p>$${menu.price}</p>
        </div>
        </div>
        <div id="plus-sign">
          <button id="mybtn" class="mybtn" data-choose="${menu.id}"> +</button>
</div>
</div>


    `
  ).join('')

}
/*
 function renderOrder(){
  const orders = document.getElementById('container')
  orders.innerHTML = getOrdersHtml();
}
function getOrdersHtml() {
  return ordersArray.map(item => `
    <div>
      <h4>Your Order</h4>
      <div class="order">
        <p>${item.name}<button class="btn" data-remove="${item.id}"><small>remove</small></button></p>
        <p>${item.price}</p>
      </div>
    </div>
  `).join('');
}
*/
/*
function renderOrder(){
  const orders = document.getElementById("orders");
  // Clear the existing content
   orders.innerHTML = ''



  // Start with the opening tag for order1 div
  orders.innerHTML = ordersArray.map(order => `
    <div class="order1">
      <h4>Your Order</h4>
    <div style="display:flex;">
    <p>${order.name}  <button class="btn" data-remove="${order.id}"><small>remove</small></button></p>
    <p> $${order.price}</p>
</div>
</div>
  `).join('');
}
*/
function renderOrder(){
  const orders = document.getElementById("orders")
  let totalPrice = 0;

  let orderDiv = document.querySelector('.order1');

  if(!orderDiv){
    // If not, create the order1 div
    orders.innerHTML = `<div class="order1"></div>`
    orderDiv = document.querySelector('.order1')
  }
  // Clear existing content inside order1 div
  orderDiv.innerHTML = '';
  if(ordersArray.length > 0){
    // Display "Your Order" heading only if there are items in the ordersArray
    orderDiv.innerHTML = '<h4 style="text-align:center;">Your Order</h4>'
    ordersArray.forEach(order => {
      orderDiv.innerHTML += `

               <div style="display:flex;justify-content:space-between;">
                 <p>${order.name} <button class="btn" data-remove="${order.id}"><small style="cursor:pointer;">remove</small></button></p>
                 <p>$${order.price}</p>
               </div>
             </div>
      `
      // update total price
      totalPrice += order.price;
    })
    orderDiv.innerHTML += `
            <div style="display:flex;justify-content:space-between;border-top:1px solid #8B8B8B;">
              <p>Total Price:</p><p>$${totalPrice}</p>
              </div>
              <button id="complete-order">Complete Order</button>
            </div>`;

  }
  }

/*
//  let orderDiv = document.querySelector('order1')
//  if(!orderDiv){
    // if not, create the order1 div
  //  orders.innerHTML = '<div class="order1"></div>';
  //  orderDiv = document.querySelector('.order1');
  // }
// Clear existing content inside order1 div

orders.innerHTML = ''
ordersArray.forEach(order => {
  orders.innerHTML += `
  <h4>Your Order</h4>
  <div style="display:flex;">
  <p>${order.name}  <button class="btn" data-remove="${order.id}"><small>remove</small></button></p><p>- $${order.price}</p>
  </div>
  `;
  // Update total Price
  totalPrice += order.price;
});

orders.innerHTML += `
<div style="display:flex;">
      <p>Total Price:</p><p>$${totalPrice}</p>
      <button id="complete-order">Complete Order</button>
    </div>`;

}
/* orders.innerHTML = ordersArray.map(order => `
  <div class="order1">
  <h4>Your Order</h4>
  <div style="display:flex;">
  <p>${order.name}  <button class="btn" data-remove="${order.id}"><small>remove</small></button></p><p>- $${order.price}</p>
  </div>
  <div style="display:flex;">
  <p>Total Price:</p><p>${totalPrice}</p>
    </div>
  <button id="complete-order">Complete Order</button>

  </div>
  `).join('')
}
ordersArray.forEach(order => {
  orders.innerHTML += `
  <div class="order1">
  <h4>Your Order</h4>
  <div style="display:flex;">
  <p>${order.name}  <button class="btn" data-remove="${order.id}"><small>remove</small></button></p><p>- $${order.price}</p>
  </div>
  </div>
  `;
  totalPrice += order.price;
});

orders.innerHTML += `
<div class="order1">
<div style="display:flex;">
<p>Total Price:</p><p>$${totalPrice}</p>
<button id="complete-order">Complete Order</button>
</div>
</div>
`;
}*/
/* orders.addEventListener('click', function (e) {
  if (e.target.classList.contains('btn')) {
    const removeItemId = parseInt(e.target.dataset.remove);
    myOrders = myOrders.filter(item => item.id !== removeItemId);
    renderOrder();
  }
});
*/

document.getElementById('container').addEventListener('click',function(e) {
  if (!orderCompleted && e.target.classList.contains('mybtn')){
    const chosenItemId = parseInt(e.target.dataset.choose);
    const chosenItem = menuArray.find(menu => menu.id === chosenItemId);

    if (chosenItem){
      ordersArray.push(chosenItem)
      renderOrder()
    }
  }
})

document.getElementById('orders').addEventListener('click', function(e){
  if (e.target.classList.contains('btn')){
    const removeItemId = parseInt(e.target.dataset.remove);
    const removeIndex = ordersArray.findIndex(order => order.id === removeItemId);

    if (removeIndex !== -1){
      ordersArray.splice(removeIndex, 1);
      renderOrder();
    }
  }
  const cardDetails = document.getElementById("card-details")
  if (e.target.id === 'complete-order'){
cardDetails.style.display = 'inline'
  }
})
render()

const cardInner = document.getElementById('card-inner')
cardInner.addEventListener('submit', function(e){
  e.preventDefault()

  const cardInnerFormData = new FormData(cardInner)
  const fullName = cardInnerFormData.get('fullName')

  document.getElementById('orders').innerHTML = `
  <div class="a">
  <p>Thanks ${fullName}! Your Order is on the way</p>
  </div>
  `
  setTimeout(function(){
    const ratingSection = document.getElementById('rating-section')
    ratingSection.style.display = 'inline'
  },1000)
})
document.getElementById('card-details').addEventListener('click', function(e){
    const cardDetails = document.getElementById("card-details")
  if(e.target.id === 'pay-button'){
      cardDetails.style.display = 'none'
  }
})
const starRating = document.getElementById('star-rating');
  let selectedRating = 0;

  starRating.addEventListener('click', function (e) {
    if (e.target.classList.contains('star')) {
      const clickedRating = parseInt(e.target.getAttribute('data-rating'));

      // Update selected rating and apply styles
      updateStarRating(clickedRating);
      setTimeout(() => {
       const ratingSection = document.getElementById('rating-section');
       ratingSection.innerHTML = '<p>üëç Thank you for your feedback!</p>';
     }, 500);
    }
  });
  function updateStarRating(clickedRating) {
      selectedRating = clickedRating;

      const stars = document.querySelectorAll('.star');
      stars.forEach((star, index) => {
        if (index <= clickedRating - 1) {
          star.classList.add('selected');
        } else {
          star.classList.remove('selected');
        }
      });
    }

/*
plusSign.addEventListener('click', function(){
  const isButton = event.target.id === 'mybtn';
  if (!isButton){
    return;
  }

    return `
  <h4>Your Order</h4>
  <div class="order">
    <p>${name}<button id="btn"><small>remove</small></button></p>
    <p>${price}</p>
    </div>
    <div class="total">
      <p>Total price:</p>
      <p>${}</p>
      </div>
      <button id="complete-order">Complete Order></button>
  `
})*/
/*
let orderArray = []
function getIndividualOrder(){

  menuArray.map(function(menu){
    orderArray.push( `
    <div>
      <h4>Your Order</h4>
      <div class="order">
        <p>${menu.name}<button id="btn"><small>remove</small></button></p>
        <p>${menu.price}</p>
        </div>
        <div class="total">
          <p>Total price:</p>
          <p>${menu.price}</p>
          </div>
          <button id="complete-order">Complete Order></button>
          </div>

    `)
  })
getIndividualOrder(menuArray)
}*/



</script>
</body>

      </html>
